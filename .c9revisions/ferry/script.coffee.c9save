{"ts":1355930636857,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"m = new L.Map(\"map\",\r\n    center: new L.LatLng(42.2, -71)\r\n    zoom: 8\r\n    attributionControl: true\r\n)\r\nh=new L.Hash(m)\r\ndefaultLayer = new L.TileLayer.MapQuestOpen.OSM\r\nm.addLayer defaultLayer\r\nbbox=\"-77.1734619140625,39.842286020743394,-66.9671630859375,44.213709909702054\"\r\nurl = \"http://services.massdot.state.ma.us/ArcGIS/rest/services/Transit/FerryRoutes/MapServer/0/query?outFields=*&f=json&outSR=4326&inSR=4326&geometryType=esriGeometryEnvelope&geometry=\"\r\n\r\nmakePop = (p) ->\r\n    a = []\r\n    for key of p\r\n        a.push key + \": \" + p[key]\r\n    a.join \"<br/>\"\r\n  \r\nfp = (e,l) ->\r\n    l.bindPopup makePop(e.properties)  if e.properties\r\n\r\n\r\nferry = L.geoJson('',{onEachFeature:fp}).addTo(m);\r\nbaseLayers =\r\n    \"OpenStreetMap Default\": new L.TileLayer.OpenStreetMap.Mapnik\r\n    \"OpenStreetMap German Style\": new L.TileLayer.OpenStreetMap.DE\r\n    \"MapQuest OSM\": defaultLayer\r\n  \r\noverLays=\r\n    \"Ferry Routes\": ferry\r\n\r\nm.addControl(L.control.layers(baseLayers,overLays,{collapsed: false}));\r\n\r\ncb=(d)->\r\n        ferry.addData(d)\r\n\r\nparseJSONP=(data)->\r\n    toGeoJSON(data,cb)\r\n    \r\n$.get(url+bbox,parseJSONP,\"JSONP\")\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1130}]],"length":1130}
