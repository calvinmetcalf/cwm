{"ts":1345727792348,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var center = new L.LatLng(42.3584308,-71.0597732);\r\nvar zoom = 8;\r\nL.FuncLayer = L.TileLayer.extend({getTileUrl: function (tilePoint) {\r\n        this._adjustTilePoint(tilePoint);\r\n\r\n    \treturn this._url(L.Util.extend({\r\n\t\t\ts: this._getSubdomain(tilePoint),\r\n\t\t\tz: this._getZoomForUrl(),\r\n\t\t\tx: tilePoint.x,\r\n\t\t\ty: tilePoint.y\r\n\t\t}, this.options));\r\n\t}});\r\n\r\n//create the tiles    \r\nvar tiles =  new L.FuncLayer(gtu,{minZoom:4,maxZoom:14});\r\n//create the map\r\nvar m = new L.Map('map',{\r\n    center:center,\r\n    zoom:zoom,\r\n    layers:[tiles]\r\n    });\r\nfunction quad(z,x,y){\r\nvar bx = x.toString(2);\r\nvar by = y.toString(2);\r\nwhile(bx.length<z){\r\nbx = '0'+bx;\r\n}\r\nwhile(by.length<z){\r\nby = '0'+by;\r\n}\r\nvar i = 0;\r\nvar tab={\"0\":{\"0\":\"a\",\"1\":\"b\"},\"1\":{\"0\":\"c\",\"1\":\"d\"}};\r\nvar r =[];\r\n\r\nwhile(i<z){\r\nr.push(tab[bx[i]][by[i]]);\r\ni++;\r\n}\r\nreturn r.join('');\r\n}\r\nfunction gtu(params){\r\n var url = \"http://calvin.cloudant.com/pop/_design/genghis/_show/tiles/\"\r\n return url+quad(params.z,params.x,params.y)\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":1000}]],"length":1000}
